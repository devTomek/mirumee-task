(this["webpackJsonpmirumee-task"]=this["webpackJsonpmirumee-task"]||[]).push([[0],{102:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),i=n(69),s=n.n(i),l=(n(85),n(86),n(4)),o=n(2),u=n.p+"static/media/LOGO.f12a06d3.svg",d=(n(87),n(88),function(e){var t=e.children;return Object(a.jsx)("div",{className:"container",children:t})}),j=(n(89),n.p+"static/media/ARROW OPEN.89547e76.svg"),b=n.p+"static/media/ARROW CLOSE.45c5a01b.svg",p=(n(90),function(e){var t=e.children;return Object(a.jsx)("div",{className:"card",children:t})}),m=function(e){var t=e.onClick,n=e.isOpen,c=e.title,r=e.children;return Object(a.jsxs)("div",{className:"collapsible-card",children:[Object(a.jsxs)(p,{children:[Object(a.jsx)("span",{className:"title",children:Object(a.jsx)("p",{children:c})}),Object(a.jsx)("span",{className:"collapsible-card-button",children:Object(a.jsx)("button",{onClick:t,children:Object(a.jsx)("img",{src:n?b:j,alt:"arrowButton"})})})]}),n?Object(a.jsx)("div",{className:"card open",children:r}):null]})},O=(n(91),n(211)),h=n(12),v=n.n(h),f=n(27),x=function(){var e=Object(f.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://swapi.py4e.com/api").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a.results||a);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),g="/planets",N=function(){var e=Object(f.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat(g,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",{name:(null===n||void 0===n?void 0:n.name)||"",rotation_period:(null===n||void 0===n?void 0:n.rotation_period)||"",orbital_period:(null===n||void 0===n?void 0:n.orbital_period)||"",diameter:(null===n||void 0===n?void 0:n.diameter)||"",climate:(null===n||void 0===n?void 0:n.climate)||"",surface_water:(null===n||void 0===n?void 0:n.surface_water)||"",population:(null===n||void 0===n?void 0:n.population)||""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=(n(93),n.p+"static/media/SPINNER.21f44199.svg"),S=function(){return Object(a.jsx)("div",{"data-testid":"spinner",className:"spinner",children:Object(a.jsx)("img",{src:w,alt:"spinner"})})},C=n(5),T=(n(94),n(41)),P=function(e){var t=e.data,n=e.columns,c=Object(T.useTable)({columns:n,data:t},T.useSortBy),r=c.getTableProps,i=c.getTableBodyProps,s=c.headerGroups,l=c.rows,o=c.prepareRow;return Object(a.jsx)("div",{"data-testid":"planets-table",className:"planets-table",children:Object(a.jsxs)("table",Object(C.a)(Object(C.a)({},r()),{},{children:[Object(a.jsx)("thead",{children:s.map((function(e){return Object(a.jsx)("tr",Object(C.a)(Object(C.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(a.jsx)("th",Object(C.a)(Object(C.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(a.jsxs)("div",{className:"header-content",children:[e.render("Header"),Object(a.jsx)("span",{className:"arrow",children:e.isSorted?e.isSortedDesc?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"arrow-up",children:"\u25b2"}),Object(a.jsx)("div",{className:"arrow-down teal",children:"\u25bc"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"arrow-up teal",children:"\u25b2"}),Object(a.jsx)("div",{className:"arrow-down",children:"\u25bc"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"arrow-up",children:"\u25b2"}),Object(a.jsx)("div",{className:"arrow-down",children:"\u25bc"})]})})]})}))}))}))}))}),Object(a.jsx)("tbody",Object(C.a)(Object(C.a)({},i()),{},{children:l.map((function(e,t){return o(e),Object(a.jsx)("tr",Object(C.a)(Object(C.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(a.jsx)("td",Object(C.a)(Object(C.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},k=(n(96),function(e){var t=e.planets,n=Object(O.a)().t;return Object(a.jsx)("div",{className:"planets-small-screen",children:t.map((function(e){return Object(a.jsx)("div",{className:"planet-card",children:Object.keys(e).map((function(t){return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"column",children:n(t)}),Object(a.jsx)("div",{className:"column ".concat("name"===t?"teal":""),children:e[t]})]},t)}))},e.name)}))})}),y=function(e){var t=e.planetUrls,n=Object(c.useState)([]),r=Object(o.a)(n,2),i=r[0],s=r[1],l=Object(c.useState)([]),u=Object(o.a)(l,2),d=u[0],j=u[1],b=Object(c.useState)(!1),p=Object(o.a)(b,2),m=p[0],h=p[1],v=Object(c.useState)(!1),f=Object(o.a)(v,2),x=f[0],g=f[1],w=Object(c.useRef)(null),C=Object(O.a)().t,T=50*t.length;return Object(c.useEffect)((function(){h(!0);var e=t.map((function(e){var t=e.split("/"),n=t.length-1,a=t[n]||t[n-1];return N(a)}));Promise.all(e).then((function(e){s(e||[]),h(!1)}))}),[t]),Object(c.useEffect)((function(){var e=i[0];if(e){var t=Object.keys(e).map((function(e){return{Header:C(e),accessor:e}}));j(t)}}),[i,C]),Object(c.useEffect)((function(){var e=function(){var e=window.innerWidth<=900;g(e)};e();var t=function(){w.current&&clearTimeout(w.current),w.current=setTimeout(e,500)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t),w.current&&clearTimeout(w.current)}}),[]),Object(a.jsx)("div",{"data-testid":"planets",className:"planets",children:m?Object(a.jsx)("div",{className:"spinner-wrapper",style:{height:"".concat(T,"px")},children:Object(a.jsx)(S,{})}):x?Object(a.jsx)(k,{planets:i}):Object(a.jsx)(P,{data:i,columns:d})})},M=function(e){var t=e.title,n=e.planetUrls,r=Object(c.useState)(!1),i=Object(o.a)(r,2),s=i[0],l=i[1];return Object(a.jsx)(m,{title:t,onClick:function(){l((function(e){return!e}))},isOpen:s,children:Object(a.jsx)(y,{planetUrls:n})})},E=function(e){var t=e.movies;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){var t=e.title,n=e.planets;return Object(a.jsx)(M,{title:t,planetUrls:n},t)}))})},R=(n(102),function(){return Object(a.jsx)("div",{"data-testid":"divider",className:"divider"})}),F=n(79),L=n(44),I=(n(203),function(e){var t=e.onChange,n=e.value,c=e.id,r=e.name,i=e.label,s=e.placeholder,l=e.icon,o=e.errorText;return Object(a.jsxs)("div",{"data-testid":"input",className:"input",children:[i?Object(a.jsx)("label",{htmlFor:"input",className:o?"red":"",children:i}):null,Object(a.jsx)("input",{id:c,name:r,type:"text",onChange:t,value:n,placeholder:s}),l?Object(a.jsx)("img",{src:l,alt:"input-icon"}):null,o?Object(a.jsx)("div",{className:"error",children:o}):null]})}),_=n.p+"static/media/SEARCH.469848d2.svg",A=(n(204),function(e){var t=e.children,n=e.onClick,c=e.type,r=e.disabled;return Object(a.jsx)("span",{className:"button",children:Object(a.jsx)("button",{disabled:r,onClick:n,type:c,children:t})})}),B=(n(205),n(206),function(e){var t=e.planets,n=e.onClick;return Object(a.jsx)("div",{className:"magic-dropdown",children:t.map((function(e){return Object(a.jsx)("div",{className:"planet-name",onClick:function(){return n(e)},children:e.name},e.name)}))})}),J=(n(207),function(e){var t=e.searchValue,n=e.setChosenPlanet,r=e.clearPlanetInput,i=Object(c.useRef)(),s=Object(c.useState)([]),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(!1),b=Object(o.a)(j,2),p=b[0],m=b[1];Object(c.useEffect)((function(){if(!t)return d([]),void m(!1);i.current&&clearTimeout(i.current),m(!0);return i.current=setTimeout((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x("".concat(g,"/?search=").concat(e))}(t).then((function(e){d(e||[]),m(!1)}))}),500),function(){i.current&&clearTimeout(i.current)}}),[t]);return p?Object(a.jsx)("div",{className:"spinner-wrapper",children:Object(a.jsx)(S,{})}):u.length<=0?null:Object(a.jsx)("span",{"data-testid":"planets-dropdown",children:Object(a.jsx)(B,{planets:u,onClick:function(e){n(e),d([]),r()}})})}),V=(n(208),function(e){var t=e.children,n=e.onClick,c=e.type;return Object(a.jsx)("div",{className:"cancellable-button",children:Object(a.jsxs)("button",{onClick:n,type:c,children:[t,Object(a.jsx)("span",{"data-testid":"cross",className:"cross",children:"\u2715"})]})})}),q=(n(209),function(e){var t=e.planets,n=e.onClick;return Object(a.jsx)("div",{"data-testid":"chosen-planets",className:"chosen-planets",children:t.map((function(e){return Object(a.jsx)("div",{className:"button-wrapper",children:Object(a.jsx)(V,{type:"button",onClick:function(){return n(e)},children:e.name})},e.name)}))})}),H=function(e){var t=e.updateMovie,n=Object(O.a)().t,r=Object(c.useState)([]),i=Object(o.a)(r,2),s=i[0],u=i[1],d=Object(c.useState)(),j=Object(o.a)(d,2),b=j[0],p=j[1],m=Object(F.a)({initialValues:{movieTitle:"",planet:""},onSubmit:function(e){var n={title:e.movieTitle,planets:s.map((function(e){return e.url||""}))};t(n),u([]),m.resetForm()},validationSchema:L.a({movieTitle:L.b().test("is-capital-letter","".concat(n("mustStartWithCapitalLetter"),"."),(function(){var e;return!!(null===(e=this.originalValue)||void 0===e?void 0:e.slice(0,1).match(/[A-Z]/))})).min(3,"".concat(n("atLeastThreeCharacters"),".")).required(n("required"))})}),h=!(!m.touched.movieTitle||!m.errors.movieTitle)||!(!m.touched.planet||!m.errors.planet);Object(c.useEffect)((function(){b&&u((function(e){return e.some((function(e){return e.name===b.name}))?e:[].concat(Object(l.a)(e),[b])}))}),[b]);return Object(a.jsx)("div",{"data-testid":"add-movie-form",className:"add-movie-form",children:Object(a.jsxs)("form",{onSubmit:m.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("div",{className:"input-wrapper",children:Object(a.jsx)(I,{id:"movieTitle",name:"movieTitle",onChange:m.handleChange,value:m.values.movieTitle,placeholder:n("enterMovieTitle"),label:n("movieTitle"),errorText:m.touched.movieTitle&&m.errors.movieTitle?m.errors.movieTitle:""})}),s.length>0?Object(a.jsx)(q,{planets:s,onClick:function(e){u((function(t){var n=t.findIndex((function(t){return t.name===e.name})),a=Object(l.a)(t);return a.splice(n,1),a}))}}):null,Object(a.jsxs)("div",{className:"input-wrapper planet-input",children:[Object(a.jsx)(I,{id:"planet",name:"planet",onChange:m.handleChange,value:m.values.planet,placeholder:n("searchPlanet"),label:n("addPlanet"),icon:_,errorText:m.touched.planet&&s.length<=0?n("required"):""}),Object(a.jsx)(J,{searchValue:m.values.planet,setChosenPlanet:p,clearPlanetInput:function(){m.setFieldValue("planet","")}})]}),Object(a.jsx)("div",{className:"button-wrapper",children:Object(a.jsx)(A,{disabled:h,type:"submit",children:n("addMovie")})})]})})},W=function(e){var t=e.updateMovie,n=Object(c.useState)(!1),r=Object(o.a)(n,2),i=r[0],s=r[1],l=Object(O.a)().t;return Object(a.jsx)("span",{"data-testid":"add-movie",children:Object(a.jsx)(m,{isOpen:i,onClick:function(){return s((function(e){return!e}))},title:l("addMovie"),children:Object(a.jsx)(H,{updateMovie:t})})})},U=function(e){return localStorage.setItem("movies",JSON.stringify(e))},D=function(){var e=localStorage.getItem("movies");if(e)return JSON.parse(e)},G=function(){var e=Object(O.a)().t,t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)([]),j=Object(o.a)(s,2),b=j[0],p=j[1];Object(c.useEffect)((function(){x("/films").then((function(e){e&&(i(e),(D()||[]).length<=0&&U(e))}))}),[]),Object(c.useEffect)((function(){var e=D()||[];r.length>e.length&&U(r);var t=e.length>r.length?e:r;p(t)}),[r]);return Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(d,{children:[Object(a.jsx)("img",{src:u,alt:"logo",className:"logo"}),Object(a.jsx)(E,{movies:b}),Object(a.jsx)(R,{}),Object(a.jsx)(W,{updateMovie:function(e){i((function(t){return[].concat(Object(l.a)(t),[e])})),function(e){var t=D();t&&localStorage.setItem("movies",JSON.stringify([].concat(Object(l.a)(t),[e])))}(e)}}),Object(a.jsx)("div",{"data-testid":"footer",className:"footer",children:Object(a.jsx)("p",{children:e("copyright")})})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Z=n(45),K=n(20),Q=n(78);Z.a.use(K.e).init({fallbackLng:"en",interpolation:{escapeValue:!1},resources:{en:{translation:Q}},lng:"en"});Z.a;s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),z()},78:function(e){e.exports=JSON.parse('{"name":"Planet Name","rotation_period":"Rotation period","orbital_period":"Orbital period","diameter":"Diameter","climate":"Climate","surface_water":"Surface water","population":"Population","addMovie":"Add Movie","enterMovieTitle":"Please enter the title of the movie","movieTitle":"Movie Title","addPlanet":"Add Planet","searchPlanet":"Search for the planet in the database","mustStartWithCapitalLetter":"Movie title name must start with a capital letter","atLeastThreeCharacters":"Movie title name must be at least 3 characters long","required":"Required","copyright":"Copyright \xa9 2019 Mirumee Software"}')},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){}},[[210,1,2]]]);
//# sourceMappingURL=main.862994d4.chunk.js.map